---
description: 
globs: 
alwaysApply: true
---
This file contains rules about how to write comments in our codebase. Each rule is followed by a small example showing good and bad practices.

- Keep comments minimal and focused on complex logic only.

```typescript
// Only add a comment here because this is non-obvious:
const reversedId = id.split("").reverse().join("") // Reversed for legacy compatibility
```

- Don't add comments for obvious code or document parameters and return types that are already clear from the function signature.

```typescript
// ❌ Bad
/**
 * Add two numbers
 * @param a First number to add
 * @param b Second number to add
 * @returns The sum of a and b
 */

// ✅ Good
function add(args: { a: number; b: number }) {
  const { a, b } = args
  return a + b
}
```

- Add clear, concise comments to explain non-obvious logic or implementation decisions.

```typescript
// We're using this approach instead of the API call because it's more reliable
const exists = await db.query("SELECT EXISTS...")
```

- Use comments to explain "why" rather than "what" when the code itself clearly shows what it's doing.

```typescript
// ❌ Bad: Explains what (obvious from code)
// Loop through the array and sum values
for (const item of items) {
  total += item.price
}

// ✅ Good: Explains why
// Calculating total manually instead of using reduce() for performance with large arrays
for (const item of items) {
  total += item.price
}
```

- Avoid verbose JSDoc-style documentation when TypeScript types already provide this information.

```typescript
// ❌ Bad
/**
 * @param {string} userId - The ID of the user
 * @returns {Promise<User>} - The user object
 */

// ✅ Good
async function getUser(args: { userId: string }) {
  const { userId } = args
  return api.getUser(userId)
}
```

- Place comments directly above the specific line or block they explain.

```typescript
// ❌ Bad
// These functions handle user authentication
function login() {
  /*...*/
}
function logout() {
  /*...*/
}

// ✅ Good
function login() {
  /*...*/
}

// Logs out user and clears all session storage
function logout() {
  /*...*/
}
```
